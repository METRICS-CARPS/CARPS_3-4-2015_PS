---
title: "CARPS Reproducibility Report"
output:
  html_document:
    toc: true
    toc_float: true
---

#### Article ID: CARPS_3-4-2015_PS
#### Pilot 1: Erik Santoro
#### Co-pilot: Tysen Dauer & Jaclyn Schwartz
#### Start date: 10/31/2017
#### End date: [Insert end date - use US format]   

-------

#### Methods summary: 
[Write a brief summary of the methods underlying the target outcomes written in your own words]

------

#### Target outcomes: 
[Insert the target outcomes identified in targetOutcomes.md]  

------

[The chunk below sets up some formatting options for the R Markdown document]

```{r global_options, include=FALSE}
knitr::opts_chunk$set(echo=TRUE, warning=FALSE, message=FALSE)
```

## Step 1: Load packages

[Some useful packages are being loaded below. You can add any additional ones you might need too.]

```{r}
library(tidyverse) # for data munging
library(knitr) # for kable table formating
library(haven) # import and export 'SPSS', 'Stata' and 'SAS' Files
library(readxl) # import excel files
library(CARPSreports) # custom report functions
```

```{r Load package for repeated measures anova}

library(ez) # for repeated ANOVAs

```


## Step 2: Load data

```{r Load data}

d <- read.table("data/Bogus visual feedback alters movement_Data.tab", header=TRUE)

```

## Step 3: Tidy data

```{r Clean data -- Simplify column names}

d <- d %>%
  rename(condition1 = Condition1_Gain0.8,
         condition2 = Condition2_Gain1,
         condition3 = Condition3_Gain1.2)


```


```{r Tidy data}

d.tidy <- d %>%
  gather(condition,rangeofmotion,starts_with("condition"))


```

## Step 4: Run analysis

### Pre-processing

Assumption 1: The paper indicates that the data needs to be normalized: "To account for between-subject differences in range of motion, we transformed data for each participant to a proportion of the average range of motion demonstrated in the neutral condition." However, given the range of motion before feeling pain is 1 for each participant under the neutral (pain gain = 1) condition, I *assume the data has already been normalized.*

Assumption 2: The paper speaks of "participantâ€™s average movement-evoked pain for each condition." As such, I assume that I need to average the left & right (e.g. direction of rotation 1 & 2).

```{r Average by condition}



```

### Descriptive statistics

```{r}
```

### Inferential statistics

```{r Repeated Measuers ANOVA}

dANOVA <- ezANOVA(data = d.tidy,
                  dv = rangeofmotion,
                  wid = Participant,
                  within = condition,
                  detailed = TRUE)

print(dANOVA)

#demoAnova <- ezANOVA(myData, # specify data frame
#                     dv = RT, # specify dependent variable 
#                     wid = subject, # specify the subject variable
#                     within = .(block, check), # specify within-subject variables
#                     detailed = TRUE # get a detailed table that includes SS
#                     )

#Repeated ANOVA in R: http://sherifsoliman.com/2014/12/10/ANOVA_in_R/ ; https://www.r-statistics.com/2010/04/repeated-measures-anova-with-r-tutorials/


```

## Step 5: Conclusion

[Include the carpsReport function below]

```{r}
# You can delete this commented text for your report, it is here to serve as a guide.
# Use the carpsReport() function in this code chunk.
# Here is a guide to the arguments you should include in the function:
# Report_Type: Enter 'pilot' or 'final'
# Article_ID: Enter the article's unique ID code
# Insufficient_Information_Errors: Enter the number of Insufficient Information Errors
# Decision_Errors Enter: the number of decision errors
# Major_Numerical_Errors: Enter the number of major numerical errors
# Time_to_Complete: Enter the estimated time to complete the report in minutes
# Author_Assistance: Enter whether author assistance was required (TRUE/FALSE)
# FOR EXAMPLE:
# carpsReport(Report_Type = "pilot", 
#             Article_ID = "ABhgyo", 
#             Insufficient_Information_Errors = 0, 
#             Decision_Errors = 1, 
#             Major_Numerical_Errors = 4, 
#             Time_to_Complete = 120, 
#             Author_Assistance = TRUE)
```

[Please also include a brief text summary describing your findings. If this reproducibility check was a failure, you should note any suggestions as to what you think the likely cause(s) might be.]

[This function will output information about the package versions used in this report:]

```{r session_info, include=TRUE, echo=TRUE, results='markup'}
devtools::session_info()
```
